# 数据库设计

## 数据库
- 名称：`xiaoyuanhuodongfabuyubaomingpingtai`
- 字符集：`utf8mb4`

## 表结构概览
### roles（角色）
- id PK
- code 角色标识（admin/organizer/student）
- name 角色名称

### users（用户）
- id PK
- username 用户名（唯一）
- password_hash 密码哈希
- name 显示名
- email / phone
- enabled 是否启用
- created_at / updated_at

### user_role（用户-角色）
- id PK
- user_id
- role_id
- uk_user_role(user_id, role_id)

### organizations（组织）
- id PK
- name
- description
- contact
- created_at

### events（活动）
- id PK
- org_id 组织
- creator_id 创建者
- title / description
- category / tags / location
- signup_start_time / signup_end_time
- start_time / end_time
- capacity 容量
- status 状态（draft/pending_review/published/rejected/canceled/archived）
- checkin_code / checkin_valid_until
- created_at / updated_at

### registrations（报名）
- id PK
- event_id / user_id
- status（registered/waitlisted/canceled）
- created_at / canceled_at / checkin_at
- uk_event_user(event_id, user_id)

### notifications（通知）
- id PK
- user_id
- type
- title / content
- read_flag
- created_at

### registration_blacklist（黑名单）
- id PK
- user_id（唯一）
- reason
- created_at

## 关系说明
- users 1..n registrations
- events 1..n registrations
- users n..n roles（通过 user_role）
- organizations 1..n events

## 索引与约束
- users.username 唯一
- user_role(user_id, role_id) 唯一
- registrations(event_id, user_id) 唯一
- registration_blacklist.user_id 唯一
