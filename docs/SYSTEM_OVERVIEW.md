# 校园活动发布与报名管理平台功能与接口清单

## 角色与主要功能
### 学生
- 登录/注册，查看个人信息。
- 浏览/搜索/筛选活动（按关键字、分类、标签、时间排序）。
- 查看活动详情、封面、报名窗口、容量、状态。
- 报名/候补报名、取消报名。
- 查看“我的报名”（状态、签到时间）。
- 签到（输入签到码或扫码）。
- 接收通知（活动变更/取消、候补转正等），查看通知列表、标记已读。

### 组织者
- 登录后管理自己创建的活动：新建/编辑/提交审核/下架/归档。
- 设置报名时间窗口、容量、封面上传、时间地点、标签/分类。
- 生成签到码（二位码展示）、查看报名名单导出 CSV。
- 查看活动统计（报名/候补/签到），单活动出勤率。
- 接收审核结果、签到码生成等通知。

### 管理员
- 审核活动：待审列表、通过/驳回通知组织者。
- 管理全部活动：下架/归档、生成签到码、查看统计。
- 黑名单管理：添加/移除报名黑名单。
- 通知广播：活动变更/取消通知报名者。
- 查看汇总统计（按组织/时间范围的活动数、报名数、签到数）。
- 管理员不参与报名流程，无“我的报名”。

## 后端 API 一览（路径均以 /api 开头）
### 鉴权
- `POST /auth/register` 用户注册（默认角色 student）。
- `POST /auth/login` 登录，返回 JWT。
- `GET /auth/profile` 获取当前用户信息。

### 活动
- `GET /events` 活动列表（支持参数：keyword, category, tags, start, end, status, sortBy=startTime, sortOrder, page, size）。
- `GET /events/{id}` 活动详情，登录时附带 `myStatus`、`checkinAt`、`registeredCount`。
- `GET /events/mine`（organizer/admin）我的活动列表。
- `POST /events`（organizer/admin）创建活动，组织者默认草稿，管理员默认发布。
- `PUT /events/{id}`（organizer/admin）更新活动（容量校验，管理员可改已发布）。
- `DELETE /events/{id}`（organizer/admin）下架，通知报名者。
- `POST /events/{id}/submit`（organizer/admin）提交审核/直接发布。
- `GET /events/admin/pending`（admin）待审列表。
- `POST /events/admin/{id}/approve`（admin）审核通过（通知组织者）。
- `POST /events/admin/{id}/reject`（admin）审核驳回（通知组织者）。
- `POST /events/{id}/archive`（organizer/admin）归档。
- `POST /events/{id}/checkin-code`（organizer/admin）生成签到码（返回 code/qrText/validUntil，通知组织者）。
- `GET /events/{id}/stats`（organizer/admin）单活动统计（registered/waitlisted/checkedIn）。
- `GET /events/stats/overview`（admin）汇总统计（支持 orgId、startDate、endDate）。

### 报名/签到
- `POST /events/{id}/registrations` 报名（容量满进入候补，报名窗口校验）。
- `DELETE /events/{id}/registrations/my` 取消报名（自动候补转正）。
- `GET /registrations/my` 我的报名列表（含签到时间）。
- `GET /events/{id}/registrations/export`（organizer/admin）导出报名 CSV。
- `POST /events/{id}/checkin?code=xxx` 签到（限频，需已报名转正）。
- 黑名单：`POST /admin/registrations/blacklist` 添加；`DELETE /admin/registrations/blacklist/{userId}` 删除。

### 通知
- `GET /notifications` 列表（分页）。
- `GET /notifications/unread-count` 未读数。
- `POST /notifications/{id}/read` 标记已读。

### 文件
- `POST /files/upload`（organizer/admin，multipart）上传封面/附件，返回 URL。静态访问 `/files/**`。

## 业务规则摘要
- 活动状态：draft → pending_review → published → canceled/rejected/archived。
- 报名窗口：`signupStartTime`/`signupEndTime`，截止不得晚于活动开始；容量不可小于已报名数。
- 候补：容量满则候补；取消或扩容时按报名时间顺序自动转正并通知。
- 签到：需已报名转正，签到码 2 小时有效，简单限频（同用户 10s）。
- 通知触发：活动变更/取消、候补转正、审核通过/驳回、签到码生成。

## 前端主要页面
- 登录页（独立展示，登录后进入主布局）。
- 活动列表（筛选/排序/分页）、活动详情（封面、报名窗口、状态/候补提示、签到）。
- 我的报名（状态/签到时间）、通知中心（未读角标）。
- 活动管理（新建/编辑/提交审核/下架/归档、封面上传、签到码二维码、导出报名）。
- 审核页（管理员待审）、统计页（单活动）、汇总统计页（管理员）。

## 前端设计方案（优化版）
### 目标与原则
- 明确的信息层级：以“活动”为核心，减少学习成本。
- 统一的视觉系统：配色、间距、组件风格一致。
- 角色驱动体验：学生/组织者/管理员入口清晰。
- 可读性优先：表格、列表、状态标签一目了然。

### 全局布局与导航
- 导航固定在左侧（全站一致），右侧为内容区域，顶部为轻量标题/用户信息栏。
- 左侧导航分组：学生功能、组织者功能、管理员功能；未拥有角色的分组隐藏。
- 内容区采用“标题 + 操作区 + 主内容”的三段结构，便于快速定位。

### 视觉风格
- 主题色：深蓝紫为基底，强调色为金黄/琥珀，用于按钮和关键状态。
- 背景：细腻渐变与轻量卡片，保持校园活动的温度感。
- 字体：中文优先选择清晰稳重的无衬线字体，标题加粗，正文中等字重。
- 圆角与阴影：卡片圆角统一（如 12-16px），阴影柔和不浮夸。

### 组件规范
- 按钮：主按钮用于关键动作（报名/提交/审核），次按钮用于辅助操作（取消/返回）。
- 状态标签：草稿/待审/已发布/已取消/已归档使用固定色系与文案。
- 表格与列表：表头固定、分页明确、空状态提供引导动作。
- 表单：分区明确、必填标记统一、错误提示靠近字段。
- 弹窗：用于确认与短流程，复杂操作用抽屉/独立页。

### 页面设计要点
- 登录页：简洁欢迎区 + 明确的演示账号提示，避免干扰项。
- 活动列表：左侧导航不变，右侧顶部为筛选条，列表卡片突出活动标题/时间/地点/状态。
- 活动详情：顶部封面+关键信息，报名按钮突出；侧栏显示报名人数与窗口。
- 我的报名：列表按状态分组或标签筛选，突出签到入口。
- 通知中心：未读高亮，支持一键已读。
- 活动管理：列表+批量操作，编辑页分步骤区块（基础信息/报名/封面/发布）。
- 审核页：清晰的待审列表，卡片展示关键信息与通过/驳回按钮。
- 统计页：数据卡 + 图表 + 明细表，支持导出。

### 角色体验细化
- 学生：突出“可报名活动”“我的报名”“签到入口”。
- 组织者：突出“活动管理”“审核状态”“签到码与导出”。
- 管理员：突出“审核”“统计”“黑名单管理”。

### 响应式与可用性
- 桌面端左侧导航固定，移动端折叠为抽屉。
- 关键操作在首屏可见，避免深层页面跳转。
- 空数据与错误状态提供明确操作提示。

## 页面设计补充（逐页与跳转）
### 角色登录后的默认入口与首屏内容
- 学生登录：进入活动列表页 `/`，首屏显示筛选条 + 活动卡片列表 + 分页。
- 组织者登录：进入活动管理页 `/manage/events`，首屏显示“新建活动”按钮 + 我的活动表格。
- 管理员登录：进入审核列表页 `/admin/approvals`，首屏显示待审活动列表 + 通过/驳回操作。

### 全局页面与通用交互
- 顶部：仅展示标题与用户信息（头像/姓名/退出），不放主导航。
- 左侧导航：全站固定在左侧，仅显示该角色可用菜单；未拥有角色的菜单隐藏。
- 通知角标：始终显示在导航“通知中心”项，点击进入通知页。
- 403/404 页面：均提供返回首页按钮。

### 左侧导航分角色清单（进入页面后实际看到）
- 学生：活动列表、我的报名、通知中心。
- 组织者：活动列表、活动管理、通知中心（单活动统计入口在活动管理中）。
- 管理员：活动审核、汇总统计、黑名单管理、通知中心。

### 每个页面左侧导航显示项（逐页表格）
| 页面 | 路径 | 学生左侧导航 | 组织者左侧导航 | 管理员左侧导航 |
| --- | --- | --- | --- | --- |
| 登录页 | `/login` | 无（独立页） | 无（独立页） | 无（独立页） |
| 活动列表 | `/` | 活动列表、我的报名、通知中心 | 活动列表、活动管理、通知中心 | 活动审核、汇总统计、黑名单管理、通知中心 |
| 活动详情 | `/events/:id` | 活动列表、我的报名、通知中心 | 活动列表、活动管理、通知中心 | 活动审核、汇总统计、黑名单管理、通知中心 |
| 我的报名 | `/my/registrations` | 活动列表、我的报名、通知中心 | 无（无权限） | 无（无权限） |
| 通知中心 | `/notifications` | 活动列表、我的报名、通知中心 | 活动列表、活动管理、通知中心 | 活动审核、汇总统计、黑名单管理、通知中心 |
| 活动管理 | `/manage/events` | 无（无权限） | 活动列表、活动管理、通知中心 | 无（无权限） |
| 活动编辑 | `/manage/events/new` | 无（无权限） | 活动列表、活动管理、通知中心 | 无（无权限） |
| 活动编辑 | `/manage/events/:id/edit` | 无（无权限） | 活动列表、活动管理、通知中心 | 无（无权限） |
| 活动审核 | `/admin/approvals` | 无（无权限） | 无（无权限） | 活动审核、汇总统计、黑名单管理、通知中心 |
| 单活动统计 | `/events/:id/stats` | 无（无权限） | 活动列表、活动管理、通知中心 | 活动审核、汇总统计、黑名单管理、通知中心 |
| 汇总统计 | `/admin/stats` | 无（无权限） | 无（无权限） | 活动审核、汇总统计、黑名单管理、通知中心 |
| 黑名单管理 | `/admin/blacklist` | 无（无权限） | 无（无权限） | 活动审核、汇总统计、黑名单管理、通知中心 |
| 403 页面 | `/403` | 活动列表、我的报名、通知中心 | 活动列表、活动管理、通知中心 | 活动审核、汇总统计、黑名单管理、通知中心 |
| 404 页面 | `/:pathMatch(.*)*` | 活动列表、我的报名、通知中心 | 活动列表、活动管理、通知中心 | 活动审核、汇总统计、黑名单管理、通知中心 |

### 登录页 `/login`
- 内容：账号输入、密码输入、演示账号提示、登录按钮。
- 交互：登录成功后根据角色跳转到对应默认入口；若带 `redirect` 参数优先跳转该路径。
- 错误：用户名/密码错误提示，保留输入。

### 活动列表 `/`
- 主要区域：筛选条（关键字/分类/标签/时间/排序）、活动卡片列表、分页。
- 交互：点击活动卡片进入详情 `/events/:id`；有“去登录报名”的提示（未登录时）。

### 活动详情 `/events/:id`
- 主要区域：封面、标题、时间、地点、报名时间窗口、剩余名额、状态标签、报名/候补/取消报名按钮。
- 侧栏：报名统计、签到入口（已报名且在可签到时间）。
- 交互：报名成功提示，容量满则候补提示；点击“签到”提交签到码。

### 我的报名 `/my/registrations`
- 主要区域：报名列表（活动信息+报名状态+签到时间）。
- 交互：点击进入活动详情；可快速取消报名（若允许）。

### 通知中心 `/notifications`
- 主要区域：通知列表（未读高亮）、筛选（未读/全部）、分页。
- 交互：点击通知标记已读并进入相关页面（活动详情或管理页）。

### 活动管理 `/manage/events`（组织者/管理员）
- 主要区域：我的活动列表（状态、时间、报名人数、操作列）。
- 操作：新建、编辑、提交审核、下架、归档、生成签到码、导出报名。
- 交互：点击“新建/编辑”进入活动编辑页；点击“统计”进入统计页 `/events/:id/stats`。

### 活动编辑（建议独立页）
- 推荐路径：`/manage/events/new`、`/manage/events/:id/edit`。
- 分区：基础信息、报名设置、时间地点、封面/附件、发布设置。
- 交互：保存草稿、提交审核；校验提示贴近字段。

### 活动审核 `/admin/approvals`（管理员）
- 主要区域：待审列表（标题、组织者、时间、状态、操作）。
- 操作：通过/驳回；点击标题进入活动详情预览。

### 单活动统计 `/events/:id/stats`（组织者/管理员）
- 主要区域：数据卡（报名/候补/签到）、趋势图或柱状图、报名明细表。
- 交互：导出报名 CSV、返回活动管理。

### 汇总统计 `/admin/stats`（管理员）
- 主要区域：筛选（组织/时间范围）、数据卡（活动数/报名数/签到数）、图表。
- 交互：切换组织维度，导出统计数据。

### 黑名单管理（建议独立页）
- 推荐路径：`/admin/blacklist`。
- 主要区域：黑名单列表、搜索/添加/移除操作。

### 页面跳转规则（关键路径）
- 未登录访问非登录页：强制跳转 `/login`，登录成功后回跳原页面。
- 登录成功：学生→`/`；组织者→`/manage/events`；管理员→`/admin/approvals`。
- 活动列表 → 活动详情：点击卡片进入 `/events/:id`。
- 活动详情 → 签到：输入签到码提交后停留本页并提示成功。
- 活动管理 → 编辑：点击“编辑”进入活动编辑页。
- 活动管理 → 统计：点击“统计”进入 `/events/:id/stats`。
- 审核页 → 详情：点击活动标题进入 `/events/:id`（只读视图）。

## 前端科技风设计方案（现代化升级）
### 核心风格方向
- 氛围关键词：科技感、干净、层次感、轻量发光。
- 视觉基调：深色渐变底 + 玻璃拟态卡片 + 细线分隔。
- 统一视觉系统：色彩、间距、字体、图标、动效保持一致。

### 色彩与背景
- 主色：深蓝紫（背景渐变），强调色为电蓝/荧光青。
- 辅色：霓虹绿/琥珀色用于状态点缀（成功/警示）。
- 背景层：大面积暗色渐变 + 轻微噪点/网格纹理，营造科技感。

### 字体与排版
- 字体：标题使用更具科技感的无衬线，正文保持可读性优先。
- 字号层级：标题 > 数据卡数值 > 正文说明，数字加粗增强对比。
- 版式：卡片与图表区采用“主次分区”，避免拥挤。

### 组件与视觉规范
- 卡片：半透明玻璃卡，统一圆角（12-16px），轻柔阴影。
- 按钮：主按钮使用高对比亮色，次按钮弱化边框。
- 表格：去厚重边框，采用细分隔线与行悬浮高亮。
- 状态标签：使用亮色胶囊标签，搭配微光效果。

### 图表与数据可视化
- 管理员统计概览：双图并列（柱状对比 + 占比环形），使用渐变色柱体与环形高光。
- 组织者活动统计：双图并列（报名/签到对比 + 签到占比环形），统一色系与图例样式。
- 图表统一：坐标轴弱化、线条细化、卡片标题加小图标。

### 动效与交互细节
- 页面进入：内容分区轻微上浮 + 透明渐现。
- 图表加载：先显示骨架或轻量 loading，再渐现图表。
- 悬浮反馈：卡片轻微上浮、阴影加深，提升“现代 UI”质感。

### 适配与一致性
- 统一 8px 网格间距体系，确保对齐与节奏感。
- 桌面端两列图表，移动端自动堆叠为单列。
- 夜间视觉安全：保证文字对比度与图表可读性。

### 重点页面落地建议
- 登录页：暗色全屏 + 柔光面板 + 简洁品牌标识。
- 活动列表：卡片化列表 + 状态彩条 + 悬浮高亮。
- 统计页：双图 + 数据卡置顶，形成“科技仪表盘”感。
