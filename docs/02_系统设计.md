# 系统设计

## 总体架构
- 前端：Vue 3 + Element Plus + ECharts
- 后端：Spring Boot 3 + Spring Security + MyBatis-Plus + JWT
- 数据库：MySQL

前后端分离部署，前端通过 `/api` 代理调用后端接口。

## 模块划分
### 前端模块
- 登录/注册
- 活动列表/详情
- 我的报名/签到入口
- 组织者：活动管理、报名管理、签到管理、活动统计
- 管理员：活动审核、活动监管、汇总统计、黑名单管理
- 通知中心

### 后端模块
- 认证与授权（JWT）
- 活动管理（状态流转、审核）
- 报名与签到（候补/转正）
- 通知（广播、已读状态）
- 统计（单活动/汇总）
- 文件上传（可用于封面/附件）

## 关键流程
### 活动审核流程
1. 组织者创建活动（draft）
2. 提交审核（pending_review）
3. 管理员审核通过 → published
4. 驳回 → rejected（可再编辑提交）

### 报名与候补
1. 报名窗口内允许报名
2. 容量满则加入候补
3. 取消报名或扩容后自动转正

### 签到
1. 组织者生成签到码（2 小时有效）
2. 学生输入签到码，已报名转正方可签到

## 安全设计
- JWT 作为身份凭证
- 接口基于角色进行权限控制（`@PreAuthorize`）
- 重要操作校验活动状态与所属关系

## 数据一致性
- 报名数据与活动容量校验
- 状态流转在服务端强制校验
- 分页查询避免大数据量加载
